import{s as o,u as m,f as u,j as e,M as h,B as p,A as v,e as w,m as g,p as x}from"./index-BVrTOPYR.js";import{U as f}from"./user-D-kl7VW9.js";let n=null,c=0;const b=5*60*1e3,j=async()=>{try{const t=Date.now();if(n&&t-c<b)return n;const{data:s,error:a}=await o.from("clinics").select("*").not("slug","is",null).order("updated_at",{ascending:!1});if(a)return console.error("Error fetching reviews from Supabase:",a),l();if(!s||s.length===0)return console.warn("No published reviews found in Supabase"),l();const i=s.map(r=>({id:r.id,slug:r.slug,title:`${r.name} Review`,excerpt:r.review_introduction?r.review_introduction.replace(/<[^>]*>/g,"").substring(0,160)+"...":`Comprehensive review of ${r.name}, covering services, pricing, patient experience, and recommendations.`,content:r.review_introduction||`<h2>About ${r.name}</h2><p>Comprehensive review coming soon.</p>`,author:"CompareTheLeaf Medical Team",date:r.updated_at||new Date().toISOString(),clinicId:r.id,rating:r.rating,tags:r.specialisations||[]}));return n=i,c=t,i}catch(t){return console.error("Error loading reviews:",t),l()}},y=async t=>{try{const a=(await j()).find(d=>d.slug===t);if(a)return a;const{data:i,error:r}=await o.from("clinics").select("*").eq("slug",t).maybeSingle();return r?(console.error("Error fetching review by slug:",r),null):i?{id:i.id,slug:i.slug,title:`${i.name} Review`,excerpt:i.review_introduction?i.review_introduction.replace(/<[^>]*>/g,"").substring(0,160)+"...":`Comprehensive review of ${i.name}, covering services, pricing, patient experience, and recommendations.`,content:i.review_introduction||`<h2>About ${i.name}</h2><p>Comprehensive review coming soon.</p>`,author:"CompareTheLeaf Medical Team",date:i.updated_at||new Date().toISOString(),clinicId:i.id,rating:i.rating,tags:i.specialisations||[]}:null}catch(s){return console.error("Error fetching review by slug:",s),null}},l=()=>[{id:"cb1-medical",slug:"cb1-medical-review",title:"CB1 Medical Review",excerpt:"Comprehensive review of CB1 Medical, the UK's most affordable medical cannabis clinic with £50 flat fee covering all consultations for 12 months.",content:`<h2>CB1 Medical Review</h2><p>CB1 Medical has branded itself the "UK's most affordable medical-cannabis clinic," charging a single £50 flat fee that covers every consultation for an entire year.</p>`,author:"CompareTheLeaf Medical Team",date:"2024-02-10",clinicId:"cb1-medical",rating:4.8,tags:["affordable","flat-fee","leicester"]},{id:"releaf",slug:"releaf-review",title:"Releaf Review",excerpt:"Comprehensive review of Releaf, the UK's premium medical cannabis clinic with all-inclusive subscription model and 100% money-back guarantee.",content:"<h2>Releaf Review</h2><p>Releaf has carved out a premium, all-inclusive niche in the UK medical-cannabis arena by bundling every clinical touch-point into a single subscription.</p>",author:"CompareTheLeaf Medical Team",date:"2024-02-15",clinicId:"releaf",rating:4.9,tags:["premium","subscription","guarantee"]}],M=()=>{const{slug:t}=m(),s=u(),a=y(t||"");if(!a)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 max-w-md mx-auto",children:[e.jsx("p",{className:"text-yellow-600 mb-4",children:"Clinic review not found."}),e.jsx("button",{onClick:()=>s("/reviews"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Back to Reviews"})]})})});const i=r=>new Date(r).toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"numeric"});return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(h,{title:a.title,description:a.excerpt,datePublished:a.date,author:a.author,type:"Article",keywords:["clinic review",a.clinicId,a.title.toLowerCase()],canonicalUrl:`https://comparetheleaf.co.uk/reviews/article/${a.slug}`}),e.jsx(p,{items:[{label:"Home",path:"/"},{label:"Clinic Reviews",path:"/reviews"},{label:a.title,path:`/reviews/article/${a.slug}`}]}),e.jsx("div",{className:"bg-white shadow-sm",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("button",{onClick:()=>s("/reviews"),className:"inline-flex items-center text-blue-600 hover:text-blue-800 mb-4",children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Back to Clinic Reviews"]})})}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("article",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-6",children:a.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-sm text-gray-600 mb-8",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:a.author})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:i(a.date)})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:"5 min read"})," "]})]}),e.jsx("div",{className:"prose prose-lg max-w-none",dangerouslySetInnerHTML:{__html:a.content}})]}),e.jsx("div",{className:"px-8 pb-8",children:e.jsx(x,{})})]})})]})};export{M as default};
