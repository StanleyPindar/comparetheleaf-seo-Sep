import{f as G,n as I,g as K,r as b,j as e,M as J,B as Q,o as X,k as A,d as Z,C as ee,E as se,p as te}from"./index-BVrTOPYR.js";import{L as ie,E as ae}from"./EmailCaptureModal-DxFKtcS2.js";import"./user-D-kl7VW9.js";const oe=()=>{const S=G(),z=I(),{clinics:R}=K(),j=new URLSearchParams(z.search),w=j.get("condition")||"",d=j.get("budget")||"",y=j.get("location")||"",L=j.get("urgency")||"",[Y,D]=b.useState([]),[O,F]=b.useState(!0),[r,V]=b.useState(!1),[W,N]=b.useState(!1);b.useEffect(()=>{if(R.length===0)return;F(!0);const l=R.map(a=>{var m,x,u,h,p,g,f,v,c,M,P,B,T,U;let i=0,t=[];w&&((x=(m=a.services)==null?void 0:m.specialties)!=null&&x.some(_=>_.toLowerCase().includes(w.toLowerCase().replace("-"," "))))&&(i+=40,t.push(`Specializes in ${w.replace("-"," ")} treatment`));const C=((h=(u=a.pricing)==null?void 0:u.initialConsultation)==null?void 0:h.price)||0,k=((g=(p=a.pricing)==null?void 0:p.estimatedAnnualCost)==null?void 0:g.average)||0,n=C/6+k/12;(d==="under-150"&&n<=150||d==="150-250"&&n>=150&&n<=250||d==="250-400"&&n>=250&&n<=400||d==="400-plus"&&n>=400)&&(i+=25,t.push("Fits within your budget range")),y==="virtual"&&((v=(f=a.services)==null?void 0:f.consultationTypes)!=null&&v.includes("video"))?(i+=15,t.push("Offers virtual consultations")):y&&((P=(M=(c=a.overview)==null?void 0:c.address)==null?void 0:M.city)!=null&&P.toLowerCase().includes(y.toLowerCase()))&&(i+=15,t.push("Located in your preferred area"));const o=((B=a.patientExperience)==null?void 0:B.nextAvailableAppointment)||"";(L==="this-week"&&o.includes("day")||L==="two-weeks"&&(o.includes("day")||o.includes("week")&&parseInt(o)<=2))&&(i+=10,t.push("Available within your preferred timeframe")),i+=Math.random()*5,t.length===0&&t.push("Good overall match for your needs"),t.length===1&&(((T=a.patientExperience)==null?void 0:T.overallRating)>4.5?t.push("Highly rated by patients"):((U=a.patientExperience)==null?void 0:U.recommendationRate)>90?t.push(`${a.patientExperience.recommendationRate}% of patients recommend this clinic`):t.push("Offers comprehensive treatment options"));const E=Math.min(99,Math.max(60,Math.round(i)));return{clinic:a,score:i,matchPercentage:E,matchReasons:t}}).sort((a,i)=>i.score-a.score).slice(0,5);D(l),F(!1)},[R,w,d,y,L]);const $=s=>{V(!0),N(!1)},q=s=>{var l;(l=s.overview)!=null&&l.website&&window.open(s.overview.website,"_blank","noopener,noreferrer")},H=s=>{S(`/clinic/${s}`)};return O?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(J,{title:"Your Medical Cannabis Clinic Matches - Personalized Results",description:"Your personalized medical cannabis clinic recommendations based on your quiz responses. Find the perfect UK clinic for your specific needs.",canonicalUrl:"https://comparetheleaf.co.uk/results",keywords:["clinic matches","personalized recommendations","medical cannabis results","clinic finder results"]}),e.jsx(Q,{items:[{label:"Home",path:"/"},{label:"Results",path:"/results"}]}),e.jsx("div",{className:"bg-white shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:r?"Your Personalized Clinic Matches":"Your Top Clinic Matches"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:r?"Based on your responses, here are your best-matched clinics for your specific needs":"Enter your email to unlock detailed clinic information, pricing, and booking links"}),!r&&e.jsxs("button",{onClick:()=>N(!0),className:"mt-6 inline-flex items-center px-8 py-4 border border-transparent text-lg font-medium rounded-lg text-white bg-gradient-to-r from-blue-600 to-green-600 hover:from-blue-700 hover:to-green-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:[e.jsx(X,{className:"h-5 w-5 mr-2"}),"Unlock Full Results",e.jsx(A,{className:"ml-2 h-5 w-5"})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"space-y-6 mb-10",children:Y.slice(0,r?5:3).map((s,l)=>{var a,i,t,C,k,n,o,E,m,x,u,h,p,g,f,v;return e.jsx("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 overflow-hidden border border-gray-200",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 w-14 h-14 bg-gradient-to-r from-blue-600 to-green-600 rounded-full flex items-center justify-center text-white text-2xl font-bold mr-4",children:l+1}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:((a=s.clinic.overview)==null?void 0:a.name)||"Unknown Clinic"}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"text-lg font-semibold text-green-600 mr-4",children:[s.matchPercentage,"% match"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Z,{value:Math.round(((i=s.clinic.patientExperience)==null?void 0:i.overallRating)||0),size:18}),e.jsxs("span",{className:"ml-1 text-sm text-gray-600",children:[((C=(t=s.clinic.patientExperience)==null?void 0:t.overallRating)==null?void 0:C.toFixed(1))||"N/A","(",((k=s.clinic.patientExperience)==null?void 0:k.totalReviews)||0,")"]})]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["£",((o=(n=s.clinic.pricing)==null?void 0:n.initialConsultation)==null?void 0:o.price)||"TBC"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"consultation"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Why this clinic matches you:"}),e.jsx("ul",{className:"space-y-2",children:s.matchReasons.map((c,M)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx(ee,{className:"h-5 w-5 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700",children:c})]},M))})]}),r&&e.jsx("div",{className:"mb-6",children:e.jsx("p",{className:"text-gray-600 line-clamp-3",children:(E=s.clinic.overview)==null?void 0:E.description})}),r&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Follow-up:"}),e.jsxs("div",{className:"font-medium text-gray-900 mt-1",children:["£",((x=(m=s.clinic.pricing)==null?void 0:m.followUpConsultation)==null?void 0:x.price)||"TBC"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Annual cost:"}),e.jsxs("div",{className:"font-medium text-gray-900 mt-1",children:["£",((h=(u=s.clinic.pricing)==null?void 0:u.estimatedAnnualCost)==null?void 0:h.average)||"TBC"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Wait time:"}),e.jsx("div",{className:"font-medium text-gray-900 mt-1",children:((p=s.clinic.patientExperience)==null?void 0:p.nextAvailableAppointment)||"Contact clinic"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Location:"}),e.jsx("div",{className:"font-medium text-gray-900 mt-1",children:((f=(g=s.clinic.overview)==null?void 0:g.address)==null?void 0:f.city)||"Virtual"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-4 mt-6",children:r?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>q(s.clinic),className:"flex-1 bg-gradient-to-r from-blue-600 to-green-600 text-white px-6 py-3 rounded-lg hover:from-blue-700 hover:to-green-700 transition-all font-medium flex items-center justify-center shadow-md hover:shadow-lg",children:["Book Consultation",e.jsx(se,{className:"ml-2 h-4 w-4"})]}),e.jsxs("button",{onClick:()=>{var c;return H((c=s.clinic.overview)==null?void 0:c.id)},className:"flex-1 border border-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-50 transition-colors font-medium flex items-center justify-center",children:["View Full Profile",e.jsx(A,{className:"ml-2 h-4 w-4"})]})]}):e.jsxs("button",{onClick:()=>N(!0),className:"w-full bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center justify-center",children:[e.jsx(ie,{className:"h-5 w-5 mr-2"}),"Unlock Booking & Details"]})})]})},((v=s.clinic.overview)==null?void 0:v.id)||l)})}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-green-600 rounded-lg p-8 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Want to Compare These Clinics Side-by-Side?"}),e.jsx("p",{className:"text-lg text-blue-100 mb-6 max-w-2xl mx-auto",children:"Use our comparison tool to see detailed differences in pricing, services, and features."}),e.jsxs("button",{onClick:()=>S("/compare"),className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-blue-600 bg-white hover:bg-gray-100 transition-colors",children:["Compare Clinics",e.jsx(A,{className:"ml-2 h-5 w-5"})]})]}),e.jsx("div",{className:"mt-8",children:e.jsx(te,{})})]}),e.jsx(ae,{isOpen:W,onClose:()=>N(!1),onSubmit:$})]})};export{oe as default};
