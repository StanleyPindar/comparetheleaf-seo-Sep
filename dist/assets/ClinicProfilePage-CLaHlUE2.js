import{c as re,r as b,j as e,L as ne,S as le,b as ce,d as oe,e as de,C as me,s as xe,u as he,f as ge,g as pe,h as C,R as te,M as ue,B as ve,A as be,i as ae}from"./index-BVrTOPYR.js";import{u as fe,a as je,C as Ne}from"./useClinics-BWesUrwb.js";import{F as we}from"./filter-hTJzV1f3.js";import{U as ye}from"./user-D-kl7VW9.js";import{g as Ce}from"./metaDescriptionGenerator-CMASWFLJ.js";import"./globe-DsojNsQp.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=re("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]),Re=({strains:i,loading:l,clinicName:c})=>{const[x,u]=b.useState(""),[s,h]=b.useState(""),f=Array.from(new Set(i.flatMap(a=>{var t;return((t=a.strains)==null?void 0:t.conditions_treated)||[]}).filter(Boolean))),g=i.filter(a=>{var d,m,p;const t=!x||((d=a.strains)==null?void 0:d.name.toLowerCase().includes(x.toLowerCase())),n=!s||((p=(m=a.strains)==null?void 0:m.conditions_treated)==null?void 0:p.some(v=>v.toLowerCase().includes(s.toLowerCase())));return t&&n});return l?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Available Strains"}),e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-10 bg-gray-200 rounded w-full mb-4"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(a=>e.jsx("div",{className:"h-32 bg-gray-200 rounded"},a))})]})]}):i.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Available Strains"}),e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ne,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsxs("p",{className:"text-gray-500",children:["No strain information available for ",c]})]})]}):e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Available Strains"}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(le,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search strains...",value:x,onChange:a=>u(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(we,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsxs("select",{value:s,onChange:a=>h(a.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 min-w-[200px]",children:[e.jsx("option",{value:"",children:"All Conditions"}),f.map(a=>e.jsx("option",{value:a,children:a},a))]})]})]}),g.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500",children:"No strains match your search criteria"}),e.jsx("button",{onClick:()=>{u(""),h("")},className:"mt-4 text-blue-600 hover:text-blue-800",children:"Clear filters"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(a=>{var t,n,d,m;return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:(t=a.strains)==null?void 0:t.name}),e.jsxs("div",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:["THC: ",((n=a.strains)==null?void 0:n.thc_percentage)||"N/A","% | CBD: ",((d=a.strains)==null?void 0:d.cbd_percentage)||"N/A","%"]})]}),((m=a.strains)==null?void 0:m.conditions_treated)&&a.strains.conditions_treated.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Conditions:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.strains.conditions_treated.slice(0,3).map((p,v)=>e.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 text-xs rounded",children:p},v)),a.strains.conditions_treated.length>3&&e.jsxs("span",{className:"px-2 py-1 bg-gray-50 text-gray-700 text-xs rounded",children:["+",a.strains.conditions_treated.length-3," more"]})]})]})]},a.strain_id)})}),e.jsxs("div",{className:"mt-4 text-sm text-gray-500 text-right",children:["Showing ",g.length," of ",i.length," strains"]})]})},Se=({clinicId:i,clinicName:l})=>{const[c,x]=b.useState([]),[u,s]=b.useState(!0),[h,f]=b.useState(null);b.useEffect(()=>{(async()=>{try{if(!i){s(!1);return}s(!0);const{data:t,error:n}=await xe.from("clinic_reviews").select("*").eq("clinic_id",i).order("created_at",{ascending:!1});if(n)throw n;x(t||[]),s(!1)}catch(t){console.error("Error fetching reviews:",t),f("Failed to load reviews"),s(!1)}})()},[i]);const g=a=>new Date(a).toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"numeric"});return u?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Patient Reviews"}),e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-24 bg-gray-200 rounded w-full mb-4"}),e.jsx("div",{className:"h-24 bg-gray-200 rounded w-full mb-4"}),e.jsx("div",{className:"h-24 bg-gray-200 rounded w-full"})]})]}):h?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Patient Reviews"}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-600",children:h})})]}):c.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Patient Reviews"}),e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ce,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsxs("p",{className:"text-gray-500",children:["No reviews yet for ",l]}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Be the first to share your experience"})]})]}):e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:["Patient Reviews (",c.length,")"]}),e.jsx("div",{className:"space-y-6",children:c.map(a=>e.jsxs("div",{className:"border-b border-gray-200 pb-6 last:border-b-0 last:pb-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(oe,{value:a.rating,size:16}),e.jsx("span",{className:"ml-2 font-semibold",children:a.rating.toFixed(1)})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(ye,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:"Anonymous User"}),e.jsx("span",{className:"mx-2",children:"•"}),e.jsx(de,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:g(a.created_at)})]})]}),a.verified&&e.jsxs("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-green-100 text-green-800",children:[e.jsx(me,{className:"h-3 w-3 mr-1"}),"Verified Patient"]})]}),e.jsx("p",{className:"text-gray-700 mb-4",children:a.review_text}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.pros&&a.pros.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Pros"}),e.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:a.pros.map((t,n)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"✓"}),t]},n))})]}),a.cons&&a.cons.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Cons"}),e.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:a.cons.map((t,n)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-red-500 mr-2",children:"×"}),t]},n))})]})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Treatment: ",e.jsx("span",{className:"font-medium",children:a.treatment_type||"Not specified"})]}),e.jsx("div",{className:"flex items-center text-sm text-gray-600",children:a.would_recommend?e.jsxs("div",{className:"flex items-center text-green-600",children:[e.jsx(ie,{className:"h-4 w-4 mr-1"}),"Would recommend"]}):e.jsxs("div",{className:"flex items-center text-red-600",children:[e.jsx(ie,{className:"h-4 w-4 mr-1 transform rotate-180"}),"Would not recommend"]})})]})]},a.id))})]})};class ke extends te.Component{constructor(l){super(l),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}render(){return this.state.hasError?this.props.fallback:this.props.children}}const Be=()=>{var a,t,n,d,m,p,v,R,S,k,P,E,A,_,L,U,B,D,F,M,T,$,K,H,q,z,G,V,W,I,O,Q,Z,J,X,Y,ee,se;const{slug:i}=he(),l=ge(),{clinics:c,isLoading:x,error:u}=pe(),s=c.find(r=>{var N,w;if(!(r!=null&&r.overview))return console.warn("ClinicProfilePage: Clinic missing overview data:",r),!1;const o=C(((N=r.overview)==null?void 0:N.name)||""),y=C(((w=r.overview)==null?void 0:w.id)||""),j=o===i||y===i;return j&&console.log("ClinicProfilePage: Found matching clinic:",r.overview.name),j});te.useEffect(()=>{var r;console.log("ClinicProfilePage: Looking for slug:",i),console.log("ClinicProfilePage: Available clinics:",c.length),console.log("ClinicProfilePage: Clinic slugs:",c.map(o=>{var y,j,N,w;return{name:(y=o.overview)==null?void 0:y.name,nameSlug:C(((j=o.overview)==null?void 0:j.name)||""),id:(N=o.overview)==null?void 0:N.id,idSlug:C(((w=o.overview)==null?void 0:w.id)||"")}})),console.log("ClinicProfilePage: Found clinic:",((r=s==null?void 0:s.overview)==null?void 0:r.name)||"none")},[i,c,s]);const{strains:h,loading:f}=fe(((a=s==null?void 0:s.overview)==null?void 0:a.id)||"");je(((t=s==null?void 0:s.overview)==null?void 0:t.id)||"");const g=s?{name:((n=s.overview)==null?void 0:n.name)||"Medical Cannabis Clinic",address:{street:(m=(d=s.overview)==null?void 0:d.address)==null?void 0:m.street,city:((v=(p=s.overview)==null?void 0:p.address)==null?void 0:v.city)||"UK",postcode:(S=(R=s.overview)==null?void 0:R.address)==null?void 0:S.postcode,region:(P=(k=s.overview)==null?void 0:k.address)==null?void 0:P.region},phone:(E=s.overview)==null?void 0:E.phone,email:(A=s.overview)==null?void 0:A.email,website:(_=s.overview)==null?void 0:_.website,rating:(L=s.patientExperience)==null?void 0:L.overallRating,reviewCount:(U=s.patientExperience)==null?void 0:U.totalReviews,priceRange:`£${((D=(B=s.pricing)==null?void 0:B.initialConsultation)==null?void 0:D.price)||150}-£${((M=(F=s.pricing)==null?void 0:F.estimatedAnnualCost)==null?void 0:M.high)||4e3}`,specialties:((T=s.services)==null?void 0:T.specialties)||[],services:["Medical Cannabis Consultation","Medical Cannabis Prescription","Follow-up Care","Patient Support"]}:void 0;return x?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):u?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md mx-auto",children:[e.jsx("p",{className:"text-red-600 mb-4",children:"Error loading clinic data."}),e.jsx("button",{onClick:()=>l("/clinics"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Back to Clinics"})]})})}):s?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i&&s&&e.jsx(ue,{title:`${(($=s.overview)==null?void 0:$.name)||"Medical Cannabis Clinic"} Review UK - Pricing, Reviews & Booking`,description:Ce(s),keywords:[`${((K=s.overview)==null?void 0:K.name)||"medical cannabis clinic"} review`,`${((H=s.overview)==null?void 0:H.name)||"medical cannabis clinic"} UK`,"medical cannabis clinic review","UK medical cannabis clinic","medical cannabis consultation","book medical cannabis appointment","compare medical cannabis clinics UK","medical cannabis clinic UK","get medical cannabis prescription UK",...(((q=s.services)==null?void 0:q.specialties)||[]).map(r=>`medical cannabis for ${r.toLowerCase()}`),`medical cannabis clinic ${((G=(z=s.overview)==null?void 0:z.address)==null?void 0:G.city)||"UK"}`],canonicalUrl:`https://comparetheleaf.co.uk/clinics/${i}`,medicalBusinessData:{...g,aggregateRating:s.patientExperience?{ratingValue:s.patientExperience.overallRating,reviewCount:parseInt(s.patientExperience.totalReviews.toString())||0,bestRating:5,worstRating:1}:void 0},reviewData:s.patientExperience?{rating:s.patientExperience.overallRating,reviewCount:s.patientExperience.totalReviews,bestRating:5,worstRating:1}:void 0,breadcrumbData:[{name:"Home",url:"https://comparetheleaf.co.uk/"},{name:"Clinics",url:"https://comparetheleaf.co.uk/clinics"},{name:((V=s.overview)==null?void 0:V.name)||"Clinic",url:`https://comparetheleaf.co.uk/clinics/${i}`}]}),e.jsx(ve,{items:[{label:"Home",path:"/"},{label:"Clinics",path:"/clinics"},{label:((W=s.overview)==null?void 0:W.name)||"Clinic",path:`/clinics/${i}`}]}),e.jsx("div",{className:"bg-white shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("button",{onClick:()=>l("/clinics"),className:"inline-flex items-center text-blue-600 hover:text-blue-800 mb-4",children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Back to Clinics"]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx(ke,{fallback:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:e.jsx("p",{className:"text-red-600",children:"Something went wrong loading the clinic details."})}),children:e.jsxs("div",{className:"grid gap-8 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsx(Ne,{clinic:s}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Patient Reviews"}),e.jsx(Se,{clinicId:((I=s.overview)==null?void 0:I.id)||"",clinicName:((O=s.overview)==null?void 0:O.name)||""})]})]}),e.jsxs("aside",{className:"space-y-8",children:[e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Available Strains"}),e.jsx(Re,{strains:h,loading:f,clinicName:((Q=s.overview)==null?void 0:Q.name)||""})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-3",children:[((Z=s.overview)==null?void 0:Z.website)&&e.jsx("a",{href:s.overview.website,target:"_blank",rel:"noopener noreferrer",className:"block w-full bg-gradient-to-r from-blue-600 to-green-600 text-white text-center py-3 px-4 rounded-lg hover:from-blue-700 hover:to-green-700 transition-all font-medium",children:"Book Consultation"}),e.jsx(ae,{to:"/quiz",className:"block w-full bg-gray-100 text-gray-700 text-center py-3 px-4 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:"Find Similar Clinics"}),e.jsx(ae,{to:"/compare",className:"block w-full border border-gray-300 text-gray-700 text-center py-3 px-4 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"Compare Clinics"}),e.jsx("button",{onClick:()=>{var r,o;(o=(r=s.overview)==null?void 0:r.name)!=null&&o.toLowerCase().includes("cb1")?l("/reviews/cb1-medical-review"):l("/reviews")},className:"block w-full border border-blue-600 text-blue-600 text-center py-3 px-4 rounded-lg hover:bg-blue-50 transition-colors font-medium",children:"Read Review"})]})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"At a Glance"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Overall Rating:"}),e.jsxs("span",{className:"font-medium",children:[((X=(J=s.patientExperience)==null?void 0:J.overallRating)==null?void 0:X.toFixed(1))||"N/A","/5"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Reviews:"}),e.jsx("span",{className:"font-medium",children:((Y=s.patientExperience)==null?void 0:Y.totalReviews)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Next Available:"}),e.jsx("span",{className:"font-medium",children:((ee=s.patientExperience)==null?void 0:ee.nextAvailableAppointment)||"Contact clinic"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Response Time:"}),e.jsx("span",{className:"font-medium",children:((se=s.patientExperience)==null?void 0:se.responseTime)||"N/A"})]})]})]})]})]})})})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 max-w-md mx-auto",children:[e.jsx("p",{className:"text-yellow-600 mb-4",children:"Clinic not found."}),e.jsx("button",{onClick:()=>l("/clinics"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Back to Clinics"})]})})})};export{Be as default};
